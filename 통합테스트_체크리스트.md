# 제안제도 시스템 통합 테스트 체크리스트

**버전:** 2.2.0
**테스트 일자:** 2025-01-__
**테스트 담당자:** ___________

---

## 📌 테스트 환경 준비사항

### 사전 준비
- [ ] Netlify 배포 완료 확인
- [ ] Firebase Firestore 연결 확인
- [ ] 테스트 계정 준비 (각 역할별 1개 이상)
  - [ ] 일반사용자 (제안자)
  - [ ] 유형효과검증담당자
  - [ ] 소위원회 위원
  - [ ] 제안위원회 위원
  - [ ] 관리자
- [ ] 테스트 데이터 초기화 (선택)

### 결재선 설정 확인
- [ ] 소위원회(level 1) 설정 확인
- [ ] 제안위원회(level 2) 설정 확인
- [ ] 3차평가자(level 3) 삭제 확인
- [ ] 각 부서별 결재선 active=true 확인

---

## 👤 1. 일반사용자 (제안자) 테스트

### 1.1 로그인 및 초기 화면

**테스트 계정:** `___________`
**테스트 일시:** `____-__-__ __:__`

- [ ] **T1.1.1** 로그인 성공
  - [ ] 사번/이메일 입력
  - [ ] 비밀번호 입력
  - [ ] dashboard.html로 이동 확인

- [ ] **T1.1.2** 대시보드 표시
  - [ ] 내 제안서 건수 표시
  - [ ] 평가 중 건수 표시
  - [ ] 승인 건수 표시
  - [ ] 최근 제안서 목록 표시

### 1.2 제안서 작성 (유형효과 없음)

- [ ] **T1.2.1** 신규 제안서 작성
  - [ ] "새 제안서 작성" 버튼 클릭
  - [ ] index.html 페이지 이동
  - [ ] 제안 제목 입력
  - [ ] 기존 내용 입력
  - [ ] 개선 내용 입력
  - [ ] 유형효과 여부: "아니오" 선택
  - [ ] 자체평가 점수 입력
    - [ ] 노력도 (0-40점)
    - [ ] 창의성 (0-20점)
    - [ ] 품질개선 (0-20점)
    - [ ] 안전개선 (0-20점)
  - [ ] 총점 자동 계산 확인
  - [ ] 등급 자동 표시 확인

- [ ] **T1.2.2** 제안서 제출
  - [ ] "제출" 버튼 클릭
  - [ ] 성공 메시지 확인: "제안서가 제출되었습니다"
  - [ ] 자동으로 dashboard.html로 이동
  - [ ] 제출된 제안서가 "내 제안서" 목록에 표시
  - [ ] 상태: "평가중" 확인

### 1.3 제안서 작성 (유형효과 있음)

- [ ] **T1.3.1** 유형효과 제안서 작성
  - [ ] 유형효과 여부: "예" 선택
  - [ ] 유형효과 섹션 표시 확인
  - [ ] 예상 절감액 입력 (예: 5000000)
  - [ ] 산출 근거 입력
  - [ ] 유형효과 점수 자동 계산 확인
  - [ ] 자체평가 점수 입력
  - [ ] 총점에 유형효과 점수 포함 확인

- [ ] **T1.3.2** 유형효과 제안서 제출
  - [ ] "제출" 버튼 클릭
  - [ ] 성공 메시지 확인
  - [ ] 제출된 제안서 상태: "검증대기" 확인

### 1.4 공동제안자 추가

- [ ] **T1.4.1** 공동제안자 검색
  - [ ] "공동제안자 추가" 버튼 클릭
  - [ ] 사번 또는 이름으로 검색
  - [ ] 검색 결과 표시 확인
  - [ ] 공동제안자 선택

- [ ] **T1.4.2** 공동제안자 정보 입력
  - [ ] 역할 입력 (예: "데이터 분석")
  - [ ] 기여도 선택 (10-50%)
  - [ ] 추가 확인
  - [ ] 공동제안자 목록에 표시 확인
  - [ ] 주제안자 기여도 자동 조정 확인

### 1.5 첨부파일 업로드

- [ ] **T1.5.1** 파일 첨부
  - [ ] "파일 첨부" 버튼 클릭
  - [ ] PDF 파일 선택
  - [ ] 업로드 진행률 표시
  - [ ] 업로드 완료 확인
  - [ ] 첨부파일 목록에 표시

- [ ] **T1.5.2** 파일 삭제
  - [ ] 첨부파일 삭제 버튼 클릭
  - [ ] 삭제 확인

### 1.6 제안서 조회 및 수정

- [ ] **T1.6.1** 제출한 제안서 조회
  - [ ] dashboard.html에서 제안서 클릭
  - [ ] 제안서 상세 정보 표시
  - [ ] 현재 상태 확인
  - [ ] 평가 점수 표시 (평가 완료 시)

- [ ] **T1.6.2** 수정 요청된 제안서 수정
  - [ ] 상태: "수정요청" 제안서 선택
  - [ ] 수정 사유 확인
  - [ ] 내용 수정
  - [ ] 재제출

### 1.7 알림 확인

- [ ] **T1.7.1** 알림 수신
  - [ ] 평가 완료 시 알림 뱃지 표시
  - [ ] 알림 목록 확인
  - [ ] 알림 클릭 시 해당 제안서로 이동

**담당자 서명:** ___________
**완료 일시:** ____-__-__ __:__

---

## 💰 2. 유형효과검증담당자 테스트

### 2.1 로그인 및 대시보드

**테스트 계정:** `___________`
**테스트 일시:** `____-__-__ __:__`

- [ ] **T2.1.1** 검증담당자 로그인
  - [ ] verifier.html로 자동 이동 확인
  - [ ] 사용자 정보 표시: "유형효과 검증담당자"

- [ ] **T2.1.2** 대시보드 확인
  - [ ] 검증 대기 건수 표시
  - [ ] 오늘 검증 건수 표시
  - [ ] 총 검증 건수 표시
  - [ ] 평균 검증 금액 표시

### 2.2 검증 대기 목록

- [ ] **T2.2.1** 검증 대기 제안서 조회
  - [ ] "검증 대기" 탭 클릭
  - [ ] 검증 대기 제안서 목록 표시
  - [ ] 제안 번호, 제목, 제안자, 예상 절감액 표시
  - [ ] 제출일 표시

### 2.3 AI 분석 요청 (핵심 기능)

- [ ] **T2.3.1** AI 분석 모달 열기
  - [ ] 제안서 "검증" 버튼 클릭
  - [ ] 검증 모달 표시
  - [ ] 제안서 정보 표시 확인:
    - [ ] 제안 제목
    - [ ] 제안자 (부서)
    - [ ] 기존 내용
    - [ ] 개선 내용
    - [ ] 예상 절감액
    - [ ] 산출 근거

- [ ] **T2.3.2** AI 분석 요청
  - [ ] "AI 분석 요청" 버튼 클릭
  - [ ] 프롬프트 편집 가능 확인
  - [ ] 프롬프트 내용 확인:
    ```
    [역할]
    너는 제약회사 제안제도 '유형효과 금액 검증 담당자'로서...

    [입력 정보]
    - 제안 제목: {실제 제목}
    - 제안자: {실제 이름} ({실제 부서})
    - 기존 내용: {실제 내용}
    - 개선 내용: {실제 내용}
    - 예상 절감액: {실제 금액}원/년
    - 산출 근거: {실제 근거}
    ```
  - [ ] 플레이스홀더가 실제 값으로 치환되었는지 확인

- [ ] **T2.3.3** AI 분석 결과 확인
  - [ ] 로딩 표시
  - [ ] 분석 결과 표시
  - [ ] 출력 형식 확인:
    - [ ] ① 예상 절감액 타당성
    - [ ] ② 금액 산정 시 필수 확인 요소
    - [ ] ③ 적정 확정 금액(범위 제안)
    - [ ] ④ 기준 부합도(5점 척도)
    - [ ] ⑤ 추가 확인 필요 항목
    - [ ] ⑥ 최종 결론
  - [ ] 결과 복사 가능 확인

### 2.4 검증 완료 처리 (중요)

- [ ] **T2.4.1** 확정 금액 입력
  - [ ] 확정 금액 입력 (예: 4500000)
  - [ ] 금액 입력 시 유형효과 점수 자동 계산 확인
  - [ ] 점수 범위별 확인:
    - [ ] 0원: 0점
    - [ ] 1-2,999,999원: 5점
    - [ ] 3,000,000-5,999,999원: 10점
    - [ ] 6,000,000-9,999,999원: 15점
    - [ ] 10,000,000원 이상: 20점

- [ ] **T2.4.2** 조정 사유 입력 (10% 이상 차이 시)
  - [ ] 예상 금액과 10% 이상 차이 시 조정 사유 필수 확인
  - [ ] 조정 사유 미입력 시 오류 메시지
  - [ ] 조정 사유 입력

- [ ] **T2.4.3** 검증 의견 입력
  - [ ] 검증 의견 입력란 확인
  - [ ] AI 분석 결과 참고하여 의견 작성

- [ ] **T2.4.4** 검증 완료
  - [ ] "검증 완료" 버튼 클릭
  - [ ] 확인 메시지: "검증을 완료하시겠습니까? 완료 후 제안서는 평가 단계로 진행됩니다."
  - [ ] 확인 클릭
  - [ ] 성공 메시지: "검증이 완료되었습니다. 평가 단계로 전달됩니다."
  - [ ] **중요: Firestore 확인**
    - [ ] effectVerification.status = 'completed'
    - [ ] effectVerification.verifiedAmount = 입력한 금액
    - [ ] **currentApproverId = 소위원회 사번** ← 핵심 확인!
    - [ ] **stage = 1** ← 핵심 확인!
    - [ ] status = 'pending'

### 2.5 검증 완료 목록

- [ ] **T2.5.1** 검증 완료 제안서 조회
  - [ ] "검증 완료" 탭 클릭
  - [ ] 검증 완료 제안서 목록 표시
  - [ ] 확정 금액 표시
  - [ ] 검증 일시 표시

### 2.6 프롬프트 편집 기능

- [ ] **T2.6.1** 프롬프트 편집
  - [ ] "프롬프트 편집" 버튼 클릭 (설정 메뉴)
  - [ ] 현재 프롬프트 표시
  - [ ] 프롬프트 수정
  - [ ] 저장

- [ ] **T2.6.2** 프롬프트 기본값 복원
  - [ ] "기본값 복원" 버튼 클릭
  - [ ] 확인 메시지
  - [ ] 새로운 프롬프트로 복원 확인

### 2.7 통계 확인

- [ ] **T2.7.1** 통계 탭
  - [ ] "통계" 탭 클릭
  - [ ] 총 검증 건수
  - [ ] 이번 달 검증 건수
  - [ ] 평균 검증 금액
  - [ ] 검증 추이 그래프 (선택)

**담당자 서명:** ___________
**완료 일시:** ____-__-__ __:__

---

## 🏛️ 3. 소위원회 (1차평가자) 테스트

### 3.1 로그인 및 대시보드

**테스트 계정:** `___________`
**테스트 일시:** `____-__-__ __:__`

- [ ] **T3.1.1** 소위원회 위원 로그인
  - [ ] leader.html로 자동 이동 확인
  - [ ] 사용자 정보 표시 확인
  - [ ] 권한: "소위원회" 확인

- [ ] **T3.1.2** 대시보드 확인
  - [ ] 평가 대기 건수 표시
  - [ ] 평가 완료 건수 표시
  - [ ] 이번 달 평가 건수 표시

### 3.2 평가 대기 목록 확인

- [ ] **T3.2.1** 평가 대기 제안서 조회
  - [ ] "평가 대기" 탭 클릭
  - [ ] **currentApproverId = 본인 사번**인 제안서만 표시 확인
  - [ ] 제안 번호, 제목, 제안자, 제출일 표시
  - [ ] 유형효과 검증 완료 제안서 포함 확인

### 3.3 평가 모달 및 정보 확인

- [ ] **T3.3.1** 평가 모달 열기
  - [ ] "평가" 버튼 클릭
  - [ ] 평가 모달 표시
  - [ ] 제안서 기본 정보 표시:
    - [ ] 제안 번호
    - [ ] 제안자 (부서)
    - [ ] 제출일
    - [ ] 제안 제목
    - [ ] 기존 내용
    - [ ] 개선 내용

- [ ] **T3.3.2** 자체평가 점수 표시
  - [ ] 자체평가 총점 표시
  - [ ] 자체평가 등급 표시 (간소화됨)
  - [ ] **개별 점수는 표시 안됨** 확인

- [ ] **T3.3.3** 유형효과 검증 정보 표시 (해당 시)
  - [ ] "유형효과 검증 정보" 섹션 표시
  - [ ] 제안자 예상 금액 표시
  - [ ] **검증자 확정 금액 강조 표시** 확인
  - [ ] 검증 의견 표시
  - [ ] 검증자 정보 (이름, 검증일) 표시

### 3.4 평가 점수 입력

- [ ] **T3.4.1** 평가 항목 입력
  - [ ] 노력도 (0-40점) 선택
  - [ ] 창의성 (0-20점) 선택
  - [ ] 품질개선 (0-20점) 선택
  - [ ] 안전개선 (0-20점) 선택
  - [ ] **평가 항목 텍스트 상세화 확인:**
    - [ ] 노력도: "제안 작성에 투입된 노력, 조사·분석 깊이, 실행 난이도"
    - [ ] 창의성: "아이디어의 참신성, 기존 방식과의 차별성"
    - [ ] 품질개선: "업무효율·품질향상·비용절감 효과"
    - [ ] 안전개선: "안전사고 예방·작업환경 개선 효과"

- [ ] **T3.4.2** 점수 자동 계산
  - [ ] 총점 실시간 계산 확인
  - [ ] 등급 자동 표시 확인
  - [ ] 등급 범위:
    - [ ] 특급: 91-100점
    - [ ] 1급: 81-90점
    - [ ] 2급: 71-80점
    - [ ] 3급: 61-70점
    - [ ] 4급: 56-60점
    - [ ] 5급: 51-55점
    - [ ] 6급: 45-50점
    - [ ] 7급: 41-44점
    - [ ] 8급: 40점 이하

### 3.5 평가 승인 - 60점 이하 (중요)

- [ ] **T3.5.1** 60점 이하 평가 입력
  - [ ] 총점이 60점 이하가 되도록 점수 입력 (예: 총점 55점)
  - [ ] 평가 의견 입력
  - [ ] "승인" 버튼 클릭

- [ ] **T3.5.2** 60점 이하 승인 처리 확인
  - [ ] 확인 메시지
  - [ ] 성공 메시지: **"소위원회 평가 완료! (60점 이하로 평가 종료)"**
  - [ ] **중요: Firestore 확인**
    - [ ] scores.stage1.total = 입력한 총점
    - [ ] scores.stage1.grade = 계산된 등급
    - [ ] **currentApproverId = null** ← 핵심!
    - [ ] **status = 'approved'** ← 평가 종료!
    - [ ] **stage = 1** (변경 없음)
  - [ ] 제안위원회로 전달되지 않음 확인
  - [ ] 평가 대기 목록에서 사라짐 확인

### 3.6 평가 승인 - 60점 초과 (중요)

- [ ] **T3.6.1** 60점 초과 평가 입력
  - [ ] 총점이 60점 초과가 되도록 점수 입력 (예: 총점 75점)
  - [ ] 평가 의견 입력
  - [ ] "승인" 버튼 클릭

- [ ] **T3.6.2** 60점 초과 승인 처리 확인
  - [ ] 확인 메시지
  - [ ] 성공 메시지: **"소위원회 승인 완료! (60점 초과로 제안위원회 평가 진행)"**
  - [ ] **중요: Firestore 확인**
    - [ ] scores.stage1.total = 입력한 총점
    - [ ] **currentApproverId = 제안위원회 위원 사번** ← 핵심!
    - [ ] **stage = 2** ← 핵심!
    - [ ] **status = 'pending'** (평가 계속)
  - [ ] 제안위원회 위원에게 전달 확인
  - [ ] 평가 대기 목록에서 사라짐 확인

### 3.7 평가 반려

- [ ] **T3.7.1** 반려 처리
  - [ ] 제안서 평가 모달 열기
  - [ ] "반려" 버튼 클릭
  - [ ] 반려 사유 입력 필수 확인
  - [ ] 반려 사유 미입력 시 오류 메시지
  - [ ] 반려 사유 입력
  - [ ] 확인 클릭

- [ ] **T3.7.2** 반려 결과 확인
  - [ ] 성공 메시지
  - [ ] Firestore 확인:
    - [ ] status = 'rejected'
    - [ ] currentApproverId = null
    - [ ] rejectionReason 저장
  - [ ] 제안자에게 알림 전달 확인

### 3.8 검토 중 목록

- [ ] **T3.8.1** 검토 중 제안서 조회
  - [ ] "검토 중" 탭 클릭
  - [ ] 본인이 평가한 제안서 목록 표시
  - [ ] 평가 점수 및 상태 확인

**담당자 서명:** ___________
**완료 일시:** ____-__-__ __:__

---

## 🏆 4. 제안위원회 (2차평가자) 테스트

### 4.1 로그인 및 대시보드

**테스트 계정:** `___________`
**테스트 일시:** `____-__-__ __:__`

- [ ] **T4.1.1** 제안위원회 위원 로그인
  - [ ] leader.html로 자동 이동 확인
  - [ ] 사용자 정보 표시 확인
  - [ ] 권한: "제안위원회" 확인

### 4.2 평가 대기 목록 확인

- [ ] **T4.2.1** 평가 대기 제안서 조회
  - [ ] "평가 대기" 탭 클릭
  - [ ] **소위원회에서 60점 초과로 전달된 제안서만 표시** 확인
  - [ ] **currentApproverId = 본인 사번, stage = 2**인 제안서만 표시
  - [ ] 60점 이하 제안서는 표시 안됨 확인

### 4.3 평가 모달 및 1차 평가 점수 확인

- [ ] **T4.3.1** 평가 모달 열기
  - [ ] "평가" 버튼 클릭
  - [ ] 제안서 기본 정보 표시

- [ ] **T4.3.2** 소위원회 평가 점수 확인
  - [ ] "1차 평가 정보" 또는 scores.stage1 표시 확인
  - [ ] 소위원회 평가 총점 표시
  - [ ] 소위원회 평가 등급 표시
  - [ ] 소위원회 평가자 이름 표시
  - [ ] **60점 초과 점수만 표시됨** 확인

### 4.4 최종 평가 입력

- [ ] **T4.4.1** 평가 점수 입력
  - [ ] 노력도, 창의성, 품질개선, 안전개선 점수 입력
  - [ ] 총점 및 등급 자동 계산 확인
  - [ ] 평가 의견 입력

- [ ] **T4.4.2** 최종 승인
  - [ ] "승인" 버튼 클릭
  - [ ] 확인 메시지
  - [ ] 성공 메시지: **"최종 승인 처리되었습니다!"**
  - [ ] **중요: Firestore 확인**
    - [ ] scores.stage2.total = 입력한 총점
    - [ ] scores.stage2.grade = 계산된 등급
    - [ ] **currentApproverId = null**
    - [ ] **status = 'approved'**
    - [ ] **stage = 2** (유지)
  - [ ] 평가 대기 목록에서 사라짐 확인
  - [ ] 제안자에게 최종 승인 알림 전달

### 4.5 반려 및 수정 요청

- [ ] **T4.5.1** 수정 요청
  - [ ] "수정 요청" 버튼 클릭 (있는 경우)
  - [ ] 수정 요청 사유 입력
  - [ ] 확인
  - [ ] 제안자에게 알림 전달

**담당자 서명:** ___________
**완료 일시:** ____-__-__ __:__

---

## ⚙️ 5. 관리자 테스트

### 5.1 로그인 및 대시보드

**테스트 계정:** `___________`
**테스트 일시:** `____-__-__ __:__`

- [ ] **T5.1.1** 관리자 로그인
  - [ ] admin.html로 자동 이동 확인
  - [ ] 관리자 대시보드 표시

- [ ] **T5.1.2** 통계 확인
  - [ ] 전체 제안서 수
  - [ ] 전체 사용자 수
  - [ ] 평가자 수
  - [ ] 통계 그래프 표시

### 5.2 사용자 관리

- [ ] **T5.2.1** 사용자 목록 조회
  - [ ] "사용자 관리" 탭 클릭
  - [ ] 전체 사용자 목록 표시
  - [ ] 사번, 이름, 부서, 권한 표시

- [ ] **T5.2.2** 권한 필터링
  - [ ] 권한 필터 드롭다운 확인:
    - [ ] "소위원회" 옵션 확인 (1차평가자 → 변경됨)
    - [ ] "제안위원회" 옵션 확인 (2차평가자 → 변경됨)
    - [ ] **"3차평가자" 옵션 없음** 확인 ← 중요!
  - [ ] 각 권한별 필터링 동작 확인

### 5.3 권한 설정 (중요)

- [ ] **T5.3.1** 사용자 권한 편집
  - [ ] 사용자 선택
  - [ ] "권한 편집" 버튼 클릭
  - [ ] 권한 체크박스 목록 표시:
    - [ ] 일반사용자
    - [ ] **소위원회** (변경됨)
    - [ ] **제안위원회** (변경됨)
    - [ ] 유형효과검증
    - [ ] 관리자
    - [ ] **3차평가자 없음** 확인 ← 핵심!

- [ ] **T5.3.2** 소위원회 권한 설정
  - [ ] "소위원회" 체크박스 선택
  - [ ] 저장
  - [ ] Firestore 확인: roles 배열에 'firstReviewer' 포함

- [ ] **T5.3.3** 제안위원회 권한 설정
  - [ ] "제안위원회" 체크박스 선택
  - [ ] 저장
  - [ ] Firestore 확인: roles 배열에 'secondReviewer' 포함

### 5.4 조직도 관리

- [ ] **T5.4.1** 조직도 업로드
  - [ ] "조직도 관리" 탭 클릭
  - [ ] Excel 파일 선택
  - [ ] 업로드
  - [ ] 처리 결과 확인:
    - [ ] 총 인원 수
    - [ ] 재직자 수
    - [ ] 리더(평가자) 수
    - [ ] 부서 수

- [ ] **T5.4.2** 리더 목록 확인
  - [ ] 리더(평가자) 목록 표시
  - [ ] leaderLevel 1, 2만 표시 확인
  - [ ] **leaderLevel 3 없음** 확인

### 5.5 결재선 관리 (매우 중요)

- [ ] **T5.5.1** 결재선 목록 조회
  - [ ] "결재선 관리" 탭 클릭 (또는 별도 메뉴)
  - [ ] 전체 결재선 목록 표시
  - [ ] 부서별 결재선 표시

- [ ] **T5.5.2** 결재선 상세 확인
  - [ ] 결재선 선택
  - [ ] approvers 배열 확인:
    - [ ] **level 1 (소위원회) 존재**
    - [ ] **level 2 (제안위원회) 존재**
    - [ ] **level 3 없음** 확인 ← 중요!
  - [ ] 각 approver의 id, name 확인

- [ ] **T5.5.3** 기존 결재선 수정 (level 3 제거)
  - [ ] level 3이 남아있는 결재선 검색
  - [ ] 편집 모드
  - [ ] level 3 평가자 삭제
  - [ ] 저장
  - [ ] **모든 결재선에서 level 3 제거 확인**

### 5.6 제안서 관리

- [ ] **T5.6.1** 전체 제안서 조회
  - [ ] "제안서 관리" 탭 클릭
  - [ ] 전체 제안서 목록 표시
  - [ ] 상태별 필터링
  - [ ] 부서별 필터링

- [ ] **T5.6.2** 제안서 상세 조회
  - [ ] 제안서 선택
  - [ ] 모든 평가 점수 확인:
    - [ ] 자체평가 (scores.self)
    - [ ] 소위원회 평가 (scores.stage1) - 있는 경우
    - [ ] 제안위원회 평가 (scores.stage2) - 있는 경우
  - [ ] 결재 히스토리 확인
  - [ ] 유형효과 검증 정보 확인

**담당자 서명:** ___________
**완료 일시:** ____-__-__ __:__

---

## 🔄 6. 통합 시나리오 테스트

### 시나리오 1: 유형효과 없는 제안서 (60점 이하)

**시나리오 설명:** 일반 제안서가 소위원회 평가에서 60점 이하를 받아 즉시 종료되는 경우

**참여자:**
- 제안자: `___________`
- 소위원회: `___________`

**단계:**
- [ ] **S1.1** 제안자: 유형효과 없는 제안서 작성 및 제출
  - [ ] 제안 번호 기록: `___________`
  - [ ] 상태: "평가중" 확인

- [ ] **S1.2** Firestore 확인
  - [ ] currentApproverId = 소위원회 사번
  - [ ] stage = 1
  - [ ] status = 'pending'

- [ ] **S1.3** 소위원회: 평가 대기 목록 확인
  - [ ] 해당 제안서 표시 확인

- [ ] **S1.4** 소위원회: 60점 이하 평가
  - [ ] 총점 55점 입력 (예시)
  - [ ] 승인 클릭
  - [ ] 메시지: "소위원회 평가 완료! (60점 이하로 평가 종료)"

- [ ] **S1.5** Firestore 최종 확인
  - [ ] currentApproverId = null
  - [ ] status = 'approved'
  - [ ] stage = 1
  - [ ] scores.stage1.total = 55

- [ ] **S1.6** 제안자: 평가 결과 확인
  - [ ] 알림 수신
  - [ ] 제안서 상태: "승인"
  - [ ] 최종 점수: 55점
  - [ ] **제안위원회 평가 없음** 확인

**결과:** ✅ PASS / ❌ FAIL
**비고:** ___________

---

### 시나리오 2: 유형효과 없는 제안서 (60점 초과)

**시나리오 설명:** 일반 제안서가 소위원회 평가에서 60점 초과를 받아 제안위원회로 전달되는 경우

**참여자:**
- 제안자: `___________`
- 소위원회: `___________`
- 제안위원회: `___________`

**단계:**
- [ ] **S2.1** 제안자: 유형효과 없는 제안서 작성 및 제출
  - [ ] 제안 번호 기록: `___________`

- [ ] **S2.2** 소위원회: 60점 초과 평가
  - [ ] 총점 75점 입력 (예시)
  - [ ] 승인 클릭
  - [ ] 메시지: "소위원회 승인 완료! (60점 초과로 제안위원회 평가 진행)"

- [ ] **S2.3** Firestore 확인
  - [ ] currentApproverId = 제안위원회 사번
  - [ ] stage = 2
  - [ ] status = 'pending'
  - [ ] scores.stage1.total = 75

- [ ] **S2.4** 제안위원회: 평가 대기 목록 확인
  - [ ] 해당 제안서 표시 확인
  - [ ] 소위원회 평가 점수 표시: 75점

- [ ] **S2.5** 제안위원회: 최종 평가
  - [ ] 총점 80점 입력 (예시)
  - [ ] 승인 클릭
  - [ ] 메시지: "최종 승인 처리되었습니다!"

- [ ] **S2.6** Firestore 최종 확인
  - [ ] currentApproverId = null
  - [ ] status = 'approved'
  - [ ] stage = 2
  - [ ] scores.stage1.total = 75
  - [ ] scores.stage2.total = 80

- [ ] **S2.7** 제안자: 최종 결과 확인
  - [ ] 알림 수신
  - [ ] 제안서 상태: "승인"
  - [ ] 1차 평가 점수: 75점
  - [ ] 2차 평가 점수: 80점

**결과:** ✅ PASS / ❌ FAIL
**비고:** ___________

---

### 시나리오 3: 유형효과 있는 제안서 (검증 → 60점 이하)

**시나리오 설명:** 유형효과 제안서가 검증을 거쳐 소위원회 평가에서 60점 이하로 종료되는 경우

**참여자:**
- 제안자: `___________`
- 유형효과검증담당자: `___________`
- 소위원회: `___________`

**단계:**
- [ ] **S3.1** 제안자: 유형효과 있는 제안서 작성 및 제출
  - [ ] 제안 번호 기록: `___________`
  - [ ] 예상 절감액: 5,000,000원 (예시)
  - [ ] 산출 근거 입력
  - [ ] 상태: "검증대기" 확인

- [ ] **S3.2** 유형효과검증담당자: 검증 대기 목록 확인
  - [ ] 해당 제안서 표시 확인

- [ ] **S3.3** 유형효과검증담당자: AI 분석 요청
  - [ ] "검증" 버튼 클릭
  - [ ] "AI 분석 요청" 클릭
  - [ ] **프롬프트 내용 확인:**
    - [ ] "제안 제목: {실제 제목}" 확인
    - [ ] "예상 절감액: 5,000,000원/년" 확인
    - [ ] "산출 근거: {실제 근거}" 확인
  - [ ] AI 분석 결과 수신
  - [ ] 결과 형식 확인:
    - [ ] ① 예상 절감액 타당성
    - [ ] ② 금액 산정 시 필수 확인 요소
    - [ ] ③ 적정 확정 금액(범위 제안)
    - [ ] ④ 기준 부합도(5점 척도)
    - [ ] ⑤ 추가 확인 필요 항목
    - [ ] ⑥ 최종 결론

- [ ] **S3.4** 유형효과검증담당자: 검증 완료
  - [ ] 확정 금액: 4,500,000원 입력 (예시)
  - [ ] 유형효과 점수 확인: 10점 (3,000,000-5,999,999원 범위)
  - [ ] 조정 사유 입력 (10% 이상 차이)
  - [ ] 검증 의견 입력
  - [ ] "검증 완료" 클릭
  - [ ] 메시지: "검증이 완료되었습니다. 평가 단계로 전달됩니다."

- [ ] **S3.5** Firestore 확인 (중요!)
  - [ ] effectVerification.status = 'completed'
  - [ ] effectVerification.verifiedAmount = 4,500,000
  - [ ] **currentApproverId = 소위원회 사번** ← 핵심!
  - [ ] **stage = 1** ← 핵심!
  - [ ] status = 'pending'

- [ ] **S3.6** 소위원회: 평가 대기 목록 확인
  - [ ] **해당 제안서 표시 확인** ← 중요!
  - [ ] 유형효과 검증 정보 표시 확인

- [ ] **S3.7** 소위원회: 60점 이하 평가
  - [ ] 유형효과 검증 정보 확인:
    - [ ] 예상 금액: 5,000,000원
    - [ ] 확정 금액: 4,500,000원 (강조 표시)
    - [ ] 검증 의견 표시
  - [ ] 총점 58점 입력 (예시)
  - [ ] 승인 클릭
  - [ ] 메시지: "소위원회 평가 완료! (60점 이하로 평가 종료)"

- [ ] **S3.8** Firestore 최종 확인
  - [ ] currentApproverId = null
  - [ ] status = 'approved'
  - [ ] stage = 1
  - [ ] scores.stage1.total = 58

- [ ] **S3.9** 제안자: 최종 결과 확인
  - [ ] 제안서 상태: "승인"
  - [ ] 확정 금액: 4,500,000원
  - [ ] 최종 점수: 58점

**결과:** ✅ PASS / ❌ FAIL
**비고:** ___________

---

### 시나리오 4: 유형효과 있는 제안서 (검증 → 60점 초과 → 제안위원회)

**시나리오 설명:** 유형효과 제안서가 검증을 거쳐 소위원회 60점 초과, 제안위원회 최종 승인되는 전체 프로세스

**참여자:**
- 제안자: `___________`
- 유형효과검증담당자: `___________`
- 소위원회: `___________`
- 제안위원회: `___________`

**단계:**
- [ ] **S4.1** 제안자: 유형효과 있는 제안서 작성 및 제출
  - [ ] 제안 번호 기록: `___________`
  - [ ] 예상 절감액: 10,000,000원 (예시)

- [ ] **S4.2** 유형효과검증담당자: AI 분석 및 검증
  - [ ] AI 분석 요청 및 결과 확인
  - [ ] 확정 금액: 9,500,000원 입력 (예시)
  - [ ] 유형효과 점수 확인: 15점 (6,000,000-9,999,999원 범위)
  - [ ] 검증 완료

- [ ] **S4.3** Firestore 확인
  - [ ] currentApproverId = 소위원회 사번
  - [ ] stage = 1
  - [ ] status = 'pending'

- [ ] **S4.4** 소위원회: 60점 초과 평가
  - [ ] 유형효과 검증 정보 확인
  - [ ] 총점 78점 입력 (예시)
  - [ ] 승인 클릭
  - [ ] 메시지: "소위원회 승인 완료! (60점 초과로 제안위원회 평가 진행)"

- [ ] **S4.5** Firestore 확인
  - [ ] currentApproverId = 제안위원회 사번
  - [ ] stage = 2
  - [ ] status = 'pending'
  - [ ] scores.stage1.total = 78

- [ ] **S4.6** 제안위원회: 평가 대기 목록 확인
  - [ ] 해당 제안서 표시 확인
  - [ ] 소위원회 평가 점수: 78점 표시
  - [ ] 유형효과 검증 정보 표시

- [ ] **S4.7** 제안위원회: 최종 평가
  - [ ] 총점 85점 입력 (예시)
  - [ ] 승인 클릭
  - [ ] 메시지: "최종 승인 처리되었습니다!"

- [ ] **S4.8** Firestore 최종 확인
  - [ ] currentApproverId = null
  - [ ] status = 'approved'
  - [ ] stage = 2
  - [ ] scores.stage1.total = 78
  - [ ] scores.stage2.total = 85
  - [ ] effectVerification.verifiedAmount = 9,500,000

- [ ] **S4.9** 제안자: 최종 결과 확인
  - [ ] 제안서 상태: "승인"
  - [ ] 확정 금액: 9,500,000원
  - [ ] 1차 평가: 78점
  - [ ] 2차 평가: 85점

**결과:** ✅ PASS / ❌ FAIL
**비고:** ___________

---

### 시나리오 5: 반려 프로세스

**시나리오 설명:** 소위원회에서 제안서를 반려하는 경우

**참여자:**
- 제안자: `___________`
- 소위원회: `___________`

**단계:**
- [ ] **S5.1** 제안자: 제안서 작성 및 제출
  - [ ] 제안 번호 기록: `___________`

- [ ] **S5.2** 소위원회: 반려 처리
  - [ ] 제안서 평가 모달 열기
  - [ ] "반려" 버튼 클릭
  - [ ] 반려 사유 입력: "내용이 구체적이지 않아 재작성 필요"
  - [ ] 확인

- [ ] **S5.3** Firestore 확인
  - [ ] status = 'rejected'
  - [ ] currentApproverId = null
  - [ ] rejectionReason 저장 확인

- [ ] **S5.4** 제안자: 반려 알림 확인
  - [ ] 알림 수신
  - [ ] 제안서 상태: "반려"
  - [ ] 반려 사유 확인

**결과:** ✅ PASS / ❌ FAIL
**비고:** ___________

---

## 🐛 7. 예외 상황 테스트

### 7.1 결재선 오류 처리

- [ ] **E1** 결재선에 평가자가 없는 경우
  - [ ] approvers 배열이 비어있는 결재선 생성 시도
  - [ ] 오류 메시지 확인: "결재선에 평가자가 설정되어 있지 않습니다."

- [ ] **E2** 결재선에 level 1만 있는 경우
  - [ ] level 1만 있는 결재선으로 제안서 제출
  - [ ] 소위원회가 60점 초과 평가
  - [ ] 메시지: "소위원회 평가 완료! (다음 평가자 없음)" 확인
  - [ ] status = 'approved' 확인

### 7.2 검증 오류 처리

- [ ] **E3** 검증 시 결재선 정보 없음
  - [ ] approvalLineId가 잘못된 제안서
  - [ ] 검증 완료 시도
  - [ ] 오류 메시지: "결재선 정보를 찾을 수 없습니다."

- [ ] **E4** 검증 시 소위원회 없음
  - [ ] level 1 평가자가 없는 결재선
  - [ ] 검증 완료 시도
  - [ ] 오류 메시지: "첫 번째 평가자(소위원회)를 찾을 수 없습니다."

### 7.3 동시 접근 테스트

- [ ] **E5** 동일 제안서 동시 평가 시도
  - [ ] 두 명의 평가자가 동시에 같은 제안서 평가
  - [ ] 한 명이 먼저 승인
  - [ ] 다른 평가자의 승인 시도 시 오류 확인

### 7.4 네트워크 오류

- [ ] **E6** AI 분석 요청 실패
  - [ ] 네트워크 끊김 시뮬레이션
  - [ ] 오류 메시지 표시 확인
  - [ ] 재시도 가능 확인

---

## ✅ 최종 확인 체크리스트

### 권한 변경 확인
- [ ] admin.html에서 "소위원회", "제안위원회" 표시 확인
- [ ] "3차평가자" 옵션 완전 삭제 확인
- [ ] 모든 결재선에서 level 3 제거 확인

### AI 분석 프롬프트 확인
- [ ] 제안자 입력 정보가 프롬프트에 정확히 치환됨
- [ ] 6가지 출력 형식으로 결과 반환
- [ ] 평가 기준이 상세하고 구체적

### 60점 기준 분기 확인
- [ ] 소위원회 60점 이하: 즉시 approved
- [ ] 소위원회 60점 초과: 제안위원회로 전달
- [ ] Firestore의 stage, currentApproverId 정확히 업데이트

### 검증 후 전달 확인
- [ ] 유형효과 검증 완료 후 currentApproverId 설정됨
- [ ] 소위원회 평가 대기 목록에 표시됨

---

## 📊 테스트 결과 요약

| 구분 | 총 항목 | 통과 | 실패 | 미실시 |
|------|--------|------|------|--------|
| 일반사용자 | ____ | ____ | ____ | ____ |
| 유형효과검증담당자 | ____ | ____ | ____ | ____ |
| 소위원회 | ____ | ____ | ____ | ____ |
| 제안위원회 | ____ | ____ | ____ | ____ |
| 관리자 | ____ | ____ | ____ | ____ |
| 통합 시나리오 | ____ | ____ | ____ | ____ |
| 예외 상황 | ____ | ____ | ____ | ____ |
| **전체** | **____** | **____** | **____** | **____** |

---

## 🔴 발견된 이슈

| 번호 | 심각도 | 항목 | 설명 | 담당자 | 상태 |
|------|--------|------|------|--------|------|
| 1 |  |  |  |  |  |
| 2 |  |  |  |  |  |
| 3 |  |  |  |  |  |

**심각도:** Critical / High / Medium / Low

---

## 📝 종합 의견

**테스트 총평:**
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________

**권장사항:**
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________

**최종 승인:**
- [ ] 프로덕션 배포 가능
- [ ] 수정 후 재테스트 필요
- [ ] 추가 개발 필요

**테스트 책임자 서명:** ___________
**승인 일시:** ____-__-__ __:__

---

**문서 버전:** 1.0
**작성일:** 2025-01-__
**다음 테스트 예정일:** ____-__-__
