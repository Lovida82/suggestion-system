# ì œì•ˆì œë„ ì‹œìŠ¤í…œ í”„ë¡œì„¸ìŠ¤ ë¶„ì„ ë° ê°œì„ ì•ˆ

## ğŸ“Š í˜„ì¬ í”„ë¡œì„¸ìŠ¤ íë¦„

### 1. ì œì•ˆì„œ ìƒëª…ì£¼ê¸°

```
[ì‘ì„±] â†’ [ì„ì‹œì €ì¥(draft)] â†’ [ì œì¶œ(pending)] â†’ [ê²°ì¬] â†’ [ìœ í˜•íš¨ê³¼ê²€ì¦] â†’ [1ì°¨í‰ê°€] â†’ [2ì°¨í‰ê°€] â†’ [ì™„ë£Œ]
   â†“          â†“                    â†“
 [ìˆ˜ì •]    [ìˆ˜ì •]              [ìˆ˜ì • ë¶ˆê°€]
 [ì‚­ì œ]    [ì‚­ì œ]
```

### 2. ìƒíƒœ(Status) ì •ì˜

| ìƒíƒœ | ì„¤ëª… | ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥ |
|------|------|----------------|
| `draft` | ì„ì‹œì €ì¥ ìƒíƒœ | âœ… ê°€ëŠ¥ |
| `pending` | ê²°ì¬ ëŒ€ê¸° (ê²°ì¬ ì‹œì‘ ì „) | âœ… ê°€ëŠ¥ |
| `pending` | ê²°ì¬ ì§„í–‰ ì¤‘ (ìµœì†Œ 1ëª… ìŠ¹ì¸) | âŒ ë¶ˆê°€ |
| `approved` | ê²°ì¬ ì™„ë£Œ | âŒ ë¶ˆê°€ |
| `rejected` | ë°˜ë ¤ | âš ï¸ ì¬ì‘ì„± í•„ìš” |

### 3. ê²°ì¬ í”„ë¡œì„¸ìŠ¤

```
ì œì¶œ(pending)
  â†’ 1ì°¨ ê²°ì¬ì ë°°ì •
  â†’ 1ì°¨ ê²°ì¬ì ìŠ¹ì¸/ë°˜ë ¤
  â†’ (ìŠ¹ì¸ ì‹œ) 2ì°¨ ê²°ì¬ì ë°°ì •
  â†’ 2ì°¨ ê²°ì¬ì ìŠ¹ì¸/ë°˜ë ¤
  â†’ (ìŠ¹ì¸ ì‹œ) ê²°ì¬ ì™„ë£Œ(approved)
```

### 4. ìœ í˜•íš¨ê³¼ ê²€ì¦ í”„ë¡œì„¸ìŠ¤

```
ê²°ì¬ ì™„ë£Œ(approved)
  â†’ ìœ í˜•íš¨ê³¼ ìˆìŒ? (hasTypicalEffect === true)
  â†’ ê²€ì¦ ëŒ€ê¸° ëª©ë¡
  â†’ ê²€ì¦ì: AI ë¶„ì„ ìš”ì²­ (ì„ íƒ)
  â†’ ê²€ì¦ì: í™•ì • ê¸ˆì•¡ ì…ë ¥
  â†’ ìœ í˜•íš¨ê³¼ ì ìˆ˜ ìë™ ê³„ì‚°
  â†’ ê²€ì¦ ì™„ë£Œ
  â†’ (ê´€ë¦¬ì) ê²€ì¦ ì •ë³´ ìˆ˜ì • ê°€ëŠ¥
```

### 5. í‰ê°€ í”„ë¡œì„¸ìŠ¤

```
ê²€ì¦ ì™„ë£Œ
  â†’ 1ì°¨ í‰ê°€ì ë°°ì •
  â†’ 1ì°¨ í‰ê°€ ì§„í–‰
  â†’ 1ì°¨ í‰ê°€ ì ìˆ˜ >= ê¸°ì¤€ ì ìˆ˜?
     âœ… YES â†’ 2ì°¨ í‰ê°€ ì§„í–‰
     âŒ NO â†’ 1ì°¨ í‰ê°€ë¡œ ì¢…ë£Œ
  â†’ 2ì°¨ í‰ê°€ ì§„í–‰
  â†’ ìµœì¢… ë“±ê¸‰ ì‚°ì •
```

---

## ğŸ” ë°œê²¬ëœ ë¬¸ì œì 

### 1. ì„ì‹œì €ì¥(draft) ì²˜ë¦¬ ë¡œì§ ë¶ˆì™„ì „

**ë¬¸ì œì :**
- ì„ì‹œì €ì¥ ì‹œ ê²°ì¬ ë¼ì¸ì´ ì„¤ì •ë˜ì§€ ì•ŠìŒ
- ì„ì‹œì €ì¥ í›„ "ì œì¶œí•˜ê¸°" ë²„íŠ¼ìœ¼ë¡œ ë‹¤ì‹œ ì œì¶œí•  ë°©ë²•ì´ ì—†ìŒ
- draft â†’ pendingìœ¼ë¡œ ìƒíƒœ ë³€ê²½ ë¡œì§ ëˆ„ë½

**ì˜í–¥:**
- ì‚¬ìš©ìê°€ ì„ì‹œì €ì¥í•œ ì œì•ˆì„œë¥¼ ì œì¶œí•˜ë ¤ë©´ ìˆ˜ì • í›„ ë‹¤ì‹œ ì œì¶œí•´ì•¼ í•¨

### 2. ìˆ˜ì • ê¸°ëŠ¥ì˜ ì œì¶œ ë²„íŠ¼ ì²˜ë¦¬ ì˜¤ë¥˜

**ë¬¸ì œì :**
- `updateSuggestion` í•¨ìˆ˜ê°€ í•­ìƒ pending ìƒíƒœë¡œ ì €ì¥
- draft ìƒíƒœì—ì„œ ìˆ˜ì • ì™„ë£Œ ì‹œì—ë„ pendingìœ¼ë¡œ ë³€ê²½ë¨
- ì‚¬ìš©ìê°€ "ë‚˜ì¤‘ì— ì œì¶œ"ì„ ì„ íƒí•  ìˆ˜ ì—†ìŒ

**ì˜í–¥:**
- ì„ì‹œì €ì¥ ê°œë…ì´ ë¬´ì˜ë¯¸í•´ì§

### 3. 1ì°¨/2ì°¨ í‰ê°€ í”„ë¡œì„¸ìŠ¤ ë¡œì§ ë¯¸êµ¬í˜„

**ë¬¸ì œì :**
- ê´€ë¦¬ìê°€ ì„¤ì •í•œ `firstEvaluationThreshold` ê¸°ì¤€ ì ìˆ˜ ë¡œì§ì´ ì‹¤ì œë¡œ êµ¬í˜„ë˜ì§€ ì•ŠìŒ
- leader.htmlì— í‰ê°€ ì™„ë£Œ ì‹œ ì ìˆ˜ ë¹„êµ ë¡œì§ ì—†ìŒ
- 2ì°¨ í‰ê°€ ìë™ ì§„í–‰ ë¡œì§ ì—†ìŒ

**ì˜í–¥:**
- ìˆ˜ë™ìœ¼ë¡œ 2ì°¨ í‰ê°€ ì—¬ë¶€ë¥¼ ê²°ì •í•´ì•¼ í•¨

### 4. í¸ì§‘ ëª¨ë“œ ìƒíƒœ ê´€ë¦¬ ì·¨ì•½

**ë¬¸ì œì :**
- `editingData`ì™€ `editingSuggestionId` ì „ì—­ ë³€ìˆ˜ ì‚¬ìš©
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ ìƒíƒœ ì†ì‹¤
- ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™ í›„ ëŒì•„ì˜¤ë©´ í¸ì§‘ ëª¨ë“œ í•´ì œ

**ì˜í–¥:**
- ì‚¬ìš©ì ê²½í—˜ ì €í•˜

### 5. ê²°ì¬ ë°˜ë ¤(rejected) í›„ ì²˜ë¦¬ ë¡œì§ ì—†ìŒ

**ë¬¸ì œì :**
- ë°˜ë ¤ëœ ì œì•ˆì„œ ì¬ì‘ì„± ë˜ëŠ” ìˆ˜ì • í”„ë¡œì„¸ìŠ¤ ì—†ìŒ
- ë°˜ë ¤ ì‚¬ìœ  í™•ì¸ í›„ ì²˜ë¦¬ ë°©ë²• ë¶ˆëª…í™•

**ì˜í–¥:**
- ë°˜ë ¤ëœ ì œì•ˆì„œê°€ ë°©ì¹˜ë¨

---

## âœ… ê°œì„ ì•ˆ

### 1. ì„ì‹œì €ì¥ ì œì¶œ ê¸°ëŠ¥ ì¶”ê°€

```javascript
// dashboard.html - ë‚´ ì œì•ˆì„œ ëª©ë¡ì— "ì œì¶œí•˜ê¸°" ë²„íŠ¼ ì¶”ê°€
function submitDraft(suggestionId) {
    // draft â†’ pending ìƒíƒœ ë³€ê²½
    // ê²°ì¬ ë¼ì¸ ë°°ì •
    // ì•Œë¦¼ ì „ì†¡
}
```

### 2. ìˆ˜ì • ì™„ë£Œ ì‹œ ìƒíƒœ ìœ ì§€

```javascript
// updateSuggestion í•¨ìˆ˜ ê°œì„ 
async function updateSuggestion(suggestionId) {
    const existingDoc = await db.collection('suggestions').doc(suggestionId).get();
    const currentStatus = existingDoc.data().status;

    // ê¸°ì¡´ ìƒíƒœ ìœ ì§€ (draftë©´ draftë¡œ, pendingì´ë©´ pendingìœ¼ë¡œ)
    const updateData = {
        ...formData,
        status: currentStatus, // ìƒíƒœ ìœ ì§€
        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
    };
}
```

### 3. 1ì°¨/2ì°¨ í‰ê°€ í”„ë¡œì„¸ìŠ¤ ìë™í™”

```javascript
// leader.html - í‰ê°€ ì™„ë£Œ í•¨ìˆ˜ì— ì¶”ê°€
async function completeEvaluation(suggestionId) {
    const evaluation = calculateTotalScore();

    // ì‹œìŠ¤í…œ ì„¤ì •ì—ì„œ ê¸°ì¤€ ì ìˆ˜ ê°€ì ¸ì˜¤ê¸°
    const settings = await db.collection('systemSettings').doc('general').get();
    const threshold = settings.data().firstEvaluationThreshold || 60;

    if (evaluation.totalScore >= threshold) {
        // 2ì°¨ í‰ê°€ë¡œ ì§„í–‰
        await assignSecondEvaluator(suggestionId);
    } else {
        // 1ì°¨ í‰ê°€ë¡œ ì¢…ë£Œ
        await markAsCompletedWithFirstEvaluation(suggestionId);
    }
}
```

### 4. í¸ì§‘ ëª¨ë“œ sessionStorage ì‚¬ìš©

```javascript
// í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ì—ë„ í¸ì§‘ ëª¨ë“œ ìœ ì§€
function editSuggestion(suggestionId) {
    sessionStorage.setItem('editingSuggestionId', suggestionId);
    sessionStorage.setItem('editingData', JSON.stringify(data));
    showPage('create');
}

// initializeFormì—ì„œ ë³µêµ¬
function initializeForm() {
    const editingId = sessionStorage.getItem('editingSuggestionId');
    if (editingId) {
        const data = JSON.parse(sessionStorage.getItem('editingData'));
        loadEditingData(data);
    }
}
```

### 5. ë°˜ë ¤ í›„ ì¬ì œì¶œ ê¸°ëŠ¥

```javascript
// ë°˜ë ¤ëœ ì œì•ˆì„œ ì¬ì‘ì„± ê¸°ëŠ¥
function resubmitRejectedSuggestion(suggestionId) {
    // ë°˜ë ¤ ì‚¬ìœ  í‘œì‹œ
    // ìˆ˜ì • ê°€ëŠ¥í•˜ë„ë¡ í¸ì§‘ ëª¨ë“œ ì§„ì…
    // ì¬ì œì¶œ ì‹œ ìƒˆë¡œìš´ ê²°ì¬ í”„ë¡œì„¸ìŠ¤ ì‹œì‘
}
```

---

## ğŸ¯ ìš°ì„ ìˆœìœ„ë³„ ê°œì„  ì‘ì—…

### ğŸ”´ High Priority (ì¦‰ì‹œ ìˆ˜ì • í•„ìš”)

1. **ì„ì‹œì €ì¥ ì œì¶œ ê¸°ëŠ¥** - ì‚¬ìš©ìê°€ ì„ì‹œì €ì¥í•œ ì œì•ˆì„œë¥¼ ì œì¶œí•  ìˆ˜ ì—†ìŒ
2. **ìˆ˜ì • ì‹œ ìƒíƒœ ìœ ì§€** - draftë¥¼ ìˆ˜ì •í•˜ë©´ pendingìœ¼ë¡œ ë³€ê²½ë˜ëŠ” ë²„ê·¸
3. **1ì°¨/2ì°¨ í‰ê°€ ìë™í™”** - ìš”êµ¬ì‚¬í•­ì— ëª…ì‹œëœ í•µì‹¬ ê¸°ëŠ¥

### ğŸŸ¡ Medium Priority (ì¤‘ìš”í•˜ì§€ë§Œ ê¸‰í•˜ì§€ ì•ŠìŒ)

4. **í¸ì§‘ ëª¨ë“œ ê°œì„ ** - UX ê°œì„ 
5. **ë°˜ë ¤ í›„ ì²˜ë¦¬** - í”„ë¡œì„¸ìŠ¤ ì™„ì„±ë„

### ğŸŸ¢ Low Priority (ì¶”ê°€ ê°œì„  ì‚¬í•­)

6. **ì½”ë“œ ìµœì í™”** - ì¤‘ë³µ ì½”ë“œ ì œê±°
7. **ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”** - ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€
8. **ë¡œë”© ìƒíƒœ í‘œì‹œ** - ë¹„ë™ê¸° ì‘ì—… ì§„í–‰ ìƒí™© í‘œì‹œ

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. High Priority í•­ëª©ë¶€í„° ìˆœì°¨ì ìœ¼ë¡œ êµ¬í˜„
2. ê° ê°œì„ ì‚¬í•­ í…ŒìŠ¤íŠ¸
3. ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘
4. Medium/Low Priority í•­ëª© ê²€í† 
